/* TODAS AS CONSTRAINTS E VARIÁVEIS DO TIPO NUMERIC DEVEM SER REVISADAS */


CREATE SCHEMA T1BD;


CREATE TABLE T1BD.paises (
	sigla VARCHAR(3),
	nome_extenso VARCHAR(30),
	
	CONSTRAINT pk_paises PRIMARY KEY(sigla, nome_extenso),
);


CREATE TABLE T1BD.pib (
	sigla VARCHAR(3),
	ano DATE,
	total NUMERIC(17, 2),
	per_capita NUMERIC(17, 2),
	
	CONSTRAINT pk_pib PRIMARY KEY(sigla, ano),
	CONSTRAINT fk_pib FOREIGN KEY(sigla)
		REFERENCES T1BD.paises(sigla) ON DELETE CASCADE,
	
	CONSTRAINT ck_pib_ano CHECK(ano >= 2000 AND ano <= 2023),
	CONSTRAINT ck_pib_total CHECK(total > 0.00),
	CONSTRAINT ck_pib_per_capita CHECK(per_capita > 0.00)
);


CREATE TABLE T1BD.impostos (
	sigla VARCHAR(3),
	ano DATE,
	importacao NUMERIC(, ),
	exportacao NUMERIC(, ),
	renda NUMERIC,
	
	CONSTRAINT pk_impostos PRIMARY KEY(sigla, ano),
	CONSTRAINT fk_impostos FOREIGN KEY(sigla)
		REFERENCES T1BD.paises(sigla) ON DELETE CASCADE
);


CREATE TABLE T1BD.indicadores (
	sigla VARCHAR(3),
	ano DATE,
	idh NUMERIC(4, 3),
	invest_pesq_desenv NUMERIC(14, 2),
	indiv_aces_internet INT,
	
	CONSTRAINT pk_indicadores PRIMARY KEY(sigla, ano),
	CONSTRAINT fk_indicadores FOREIGN KEY(sigla)
		REFERENCES T1BD.paises(sigla) ON DELETE CASCADE,
	
	CONSTRAINT ck_indicadores_idh CHECK(idh > 0.000 AND idh < 1.000),
	CONSTRAINT ck_indicadores_invest CHECK(invest_pesq_desenv > 0.00),
	CONSTRAINT ck_indicadores_indv CHECK(indiv_aces_internet > 0)
);


CREATE TABLE T1BD.comercio_exteriro (
	sigla VARCHAR(3),
	ano DATE,
	total_importacoes INT,
	total_exportacoes INT,
	
	CONSTRAINT pk_comercio_exteriro PRIMARY KEY(sigla, ano),
	CONSTRAINT fk_comercio_exteriro FOREIGN KEY(sigla)
		REFERENCES T1BD.paises(sigla) ON DELETE CASCADE,
	
	CONSTRAINT ck_comercio_ext_import CHECK(total_importacoes > 0)
	CONSTRAINT ck_comercio_ext_export CHECK(total_exportacoes > 0)
);

